"use strict";(self["webpackChunkproyecto_final_vue"]=self["webpackChunkproyecto_final_vue"]||[]).push([[499],{8499:function(t,a,o){o.r(a),o.d(a,{default:function(){return A}});var r=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"home"},[o("div",{staticClass:"nav"},[o("NavBar")],1),null!=t.userLogged?o("button",{staticClass:"btn btn-warning btnLogOff",on:{click:t.LogOff}},[t._v("Log Off")]):o("router-link",{staticClass:"btn btn-warning btnLogOff",attrs:{to:{name:"Login"}}},[t._v("Login")]),o("InfoUsuario"),o("div",{staticClass:"productos"},[o("Productos")],1)],1)},s=[],e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"container"},[o("nav",{staticClass:"navbar navbar-expand-lg navbar-light navbar-color"},[o("div",{staticClass:"container-fluid"},[o("button",{staticClass:"btn btn-primary",attrs:{"data-bs-toggle":"modal","data-bs-target":"#carritoModal"}},[o("span",[t._v(t._s(t.getProductosEnCarritoLength))])]),o("h1",[t._v("LoRun")]),o("div",{staticClass:"modal",attrs:{id:"carritoModal",tabindex:"-1",role:"dialog","aria-labelledby":"carritoModalTitulo","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(0),o("div",{staticClass:"modal-body"},[o("Carrito")],1)])])])])])])},i=[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"modal-header"},[o("h5",{staticClass:"carritoModalTitulo",attrs:{id:"carritoModalTitulo"}},[t._v("Carrito LoRun")]),o("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}},[o("span",{attrs:{"aria-hidden":"true"}})])])}],c=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",[o("button",{staticClass:"btn btn-danger",on:{click:function(a){return a.preventDefault(),t.VaciarCarrito.apply(null,arguments)}}},[t._v("Vaciar Carrito")]),o("p",[t._v("Para eliminar el producto lleve el contador a 0")]),o("table",{staticClass:"table table-striped table-bordered"},[t._m(0),o("tbody",t._l(t.getProductosEnCarrito,(function(a){return o("tr",{key:a.id,staticClass:"producto"},[o("th",{staticClass:"text-dark",attrs:{scope:"col",colspan:"10"}},[t._v(t._s(a.marca)+" "+t._s(a.modelo))]),o("th",{staticClass:"text-dark",attrs:{scope:"col",colspan:"1"}},[o("button",{on:{click:function(o){return t.Restar(a)}}},[t._v("-")]),t._v(" "+t._s(a.quantity)+" "),o("button",{on:{click:function(o){return t.Sumar(a)}}},[t._v("+")])]),o("th",{staticClass:"text-dark",attrs:{scope:"col"}},[t._v(t._s(a.stock))]),o("th",{staticClass:"text-dark",attrs:{scope:"col"}},[t._v(t._s(a.precio))]),o("th",{staticClass:"text-dark",attrs:{scope:"col"}},[t._v(t._s(a.total))])])})),0),o("tfoot",[o("td",{attrs:{scope:"col",colspan:"10"}}),o("td",{staticClass:"text-dark",attrs:{scope:"col"}},[o("h4",[t._v("Cantidad total: "+t._s(t.totalQuantity))])]),o("td",{attrs:{scope:"col"}}),o("td",{attrs:{scope:"col"}}),o("td",{staticClass:"text-dark",attrs:{scope:"col"}},[o("h5",[t._v("Precio Total: $"+t._s(t.totalFinal))])])])]),t.getProductosEnCarrito?o("div",{staticClass:"btnCompra text-center"},[o("button",{staticClass:"btn btn-dark",on:{click:function(a){return a.preventDefault(),t.Comprar.apply(null,arguments)}}},[t._v("Finalizar compra")])]):t._e()])},n=[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("thead",{staticClass:"text-dark"},[o("tr",[o("th",{attrs:{scope:"col",colspan:"10"}},[t._v("Productos")]),o("th",{attrs:{scope:"col",colspan:"1"}},[t._v("Cantidad")]),o("th",{attrs:{scope:"col"}},[t._v("Stock disponible ")]),o("th",{attrs:{scope:"col"}},[t._v(" Unidad $")]),o("th",{attrs:{scope:"col"}},[t._v("Total $")])])])}],l=o(4665),d={name:"Carrito",created(){this.toSetCarrito()},mounted(){this.getUserLogged,this.getProductosEnCarrito},computed:{...(0,l.Se)("carrito",["getProductosEnCarrito","getProdContador"]),...(0,l.Se)("users",["getUserLogged"]),totalQuantity(){return this.getProductosEnCarrito.reduce(((t,a)=>t+a.quantity),0)},totalFinal(){return this.getProductosEnCarrito.reduce(((t,a)=>t+parseInt(a.total)),0)},validarStock(){for(const t of Object.values(this.getProductosEnCarrito))return t.stock-t.quantity},async stockUpdate(){for(const t of Object.values(this.getProductosEnCarrito)){let a=t.id,o={stock:t.stock-t.quantity};await this.$http.put(`https://628e2cc9a339dfef87a8fd8c.mockapi.io/api/producto/${a}`,o).then((t=>t.data)).catch((t=>console.log(t)))}}},methods:{...(0,l.nv)(["toSetStock"]),...(0,l.nv)("carrito",["toVaciarProductos","toSetCarrito","toSetSumar","toSetRestar"]),VaciarCarrito(){this.toVaciarProductos(),localStorage.removeItem("carrito")},RemoveModal(){let t=document.querySelector(".modal-backdrop");null!=t&&t.remove();let a=document.querySelector("body");null!=a&&(a.style=null,a.classList=[])},async Comprar(){if(this.validarStock,!this.getUserLogged)return this.$toastr.warning("Inicia sesion para finalizar la compra");if(this.validarStock<0)return this.$toastr.warning("Verifique que haya stock disponible");if(0==this.getProductosEnCarrito)return this.$toastr.warning("Agrega un producto al carrito");{let t=this.getProductosEnCarrito.map((t=>{let{id:a,marca:o,modelo:r,precio:s,quantity:e,stock:i}=t;return{id:a,marca:o,modelo:r,precio:s,quantity:e,stock:i}}));const a=new Date,o={day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},r={productos:t,quantity:this.totalQuantity,total:this.totalFinal,fecha:a.toLocaleDateString("es-AR",o)};if(await this.$http.post(`https://628e2cc9a339dfef87a8fd8c.mockapi.io/api/corredor/${this.getUserLogged.id}/compras`,r).then((t=>{t.data})).catch((t=>console.log(t))),this.$toastr.success("Compra realizada!"),r){let a=this.validarStock;this.toSetStock({prodCompra:t,stock:a}),this.stockUpdate,localStorage.removeItem("carrito"),this.RemoveModal(),this.$router.push({name:"UsuarioCompras"})}}},Sumar(t){this.toSetSumar(t)},Restar(t){this.toSetRestar(t)}}},u=d,p=o(1001),m=(0,p.Z)(u,c,n,!1,null,"c90cc164",null),v=m.exports,C={name:"NavBar",components:{Carrito:v},mounted(){this.getProductosEnCarritoLength},methods:{},computed:{...(0,l.Se)("carrito",["getProductosEnCarritoLength"])}},h=C,g=(0,p.Z)(h,e,i,!1,null,"3655dc14",null),_=g.exports,f=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"container"},t._l(t.getProductosLista,(function(a,r){return o("div",{key:r,staticClass:"row"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-body"},[o("div",{staticClass:"face front"},[o("img",{staticClass:"card-img-top",attrs:{src:a.img,alt:a.modelo}}),o("h5",{staticClass:"card-title text-dark"},[t._v(t._s(a.marca))]),o("p",{staticClass:"card-text text-dark"},[t._v(t._s(a.modelo))])]),o("div",{staticClass:"face back"},[o("p",{staticClass:"card-text text-dark"},[t._v(t._s(a.marca)+" "+t._s(a.modelo))]),o("p",{staticClass:"card-text text-dark"},[t._v("Weight: "+t._s(a.peso))]),o("p",{staticClass:"card-text text-dark"},[t._v("Drop: "+t._s(a.drop))]),o("p",{staticClass:"card-text text-dark"},[t._v("Precio $"+t._s(a.precio))]),o("p",{staticClass:"card-text text-dark"},[t._v(" Stock: "+t._s(a.stock))]),o("div",{staticClass:"contador"},[o("button",{on:{click:function(o){return t.Restar(a)}}},[t._v("-")]),o("p",[t._v(" "+t._s(a.quantity)+" ")]),o("button",{on:{click:function(o){return t.Sumar(a)}}},[t._v("+")])]),o("button",{staticClass:"btn btn-dark text-center",on:{click:function(o){return t.ProductoAlCarrito(a)}}},[t._v("Agregar al carrito")])])])])])})),0)},b=[],k={name:"Productos",created(){this.toProductosLista()},computed:{...(0,l.Se)(["getProductosLista"])},methods:{...(0,l.nv)(["toProductosLista","toSetSumarQuantity","toSetRestarQuantity"]),...(0,l.nv)("carrito",["toProductosEnCarrito"]),ProductoAlCarrito(t){this.toProductosEnCarrito(t),this.$toastr.success("Producto agregado!")},Sumar(t){this.toSetSumarQuantity(t)},Restar(t){this.toSetRestarQuantity(t)}}},S=k,y=(0,p.Z)(S,f,b,!1,null,"a10cd608",null),x=y.exports,P=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"userview"},[null!=t.userLogged?o("div",[o("br"),o("h3",{staticClass:"text-center text-dark"},[t._v("Hola "+t._s(t.userLogged.nombre)+"!")]),o("div",{staticClass:"text-center mb-3"},[o("button",{staticClass:"btn btn-secondary text-center",attrs:{type:"button"},on:{click:t.verCompras}},[t._v("Ver Compras")]),t.userLogged.isAdmin?o("router-link",{staticClass:"btn btn-danger text-center",attrs:{to:{name:"Admin"}}},[t._v("Ir a ediciones")]):t._e()],1),o("br")]):t._e()])},L=[],E={name:"InfoUsuario",created(){this.toSetCarrito()},mounted(){this.getCarrito},computed:{...(0,l.rn)("users",["userLogged"])},methods:{...(0,l.nv)("carrito",["toSetCarrito"]),verCompras(){this.$router.push("/UsuarioCompras")}}},$=E,R=(0,p.Z)($,P,L,!1,null,"2980cbc4",null),q=R.exports,w={name:"Home",components:{Productos:x,NavBar:_,InfoUsuario:q},mounted(){this.toSetCarrito()},computed:{...(0,l.rn)("users",["userLogged"])},methods:{...(0,l.nv)("carrito",["toSetCarrito"]),...(0,l.nv)("users",["LogOff"])}},U=w,I=(0,p.Z)(U,r,s,!1,null,"34734f7e",null),A=I.exports}}]);
//# sourceMappingURL=499.6904312d.js.map